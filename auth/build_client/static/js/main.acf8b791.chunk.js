(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{52:function(e,t,n){e.exports=n(77)},57:function(e,t,n){},77:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(23),i=n.n(o),s=(n(57),n(10)),l=n(11),c=n(13),u=n(12),d=n(14),p=n(19),m=n(21),h=n(45),g={headerBackground:"#003459",background:"#00171F",background2:"#2a80bd",text:"white",headerText:"white",errorText:"red",button:"blue"},f=n(28),y=n.n(f),S=n(35),E="68.183.197.232",C={register:"http://".concat(E,":5000/auth/register"),login:"http://".concat(E,":5000/auth/login"),user:"http://".concat(E,":5000/auth/user")},v=function(e,t,n){t||(t=function(){}),n||(n=function(){});var a=sessionStorage.getItem("session_token");fetch(C.user,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:a},body:JSON.stringify(e)}).then(function(e){return e.json()}).then(function(e){"Success"===e.status?t(e.info):n(e)}).catch(n)},b=function(e,t,n){var a=sessionStorage.getItem("session_token"),r=sessionStorage.getItem("fcm_token");fetch(C.user,{method:"GET",headers:{"Content-Type":"application/json",Authorization:a}}).then(function(e){return e.json()}).then(function(a){if("Success"===a.status){if(e(a.info),n)if(r){var o={data:{fcm_tokens:[]}};a.info.data&&(o={data:a.info.data}),-1===o.data.fcm_tokens.indexOf(r)&&o.data.fcm_tokens.push(r),v(o)}else console.error("THIS SHOULD HAVE A TOKEN")}else t(a)}).catch(t)},O=function(e,t,n){fetch(C.login,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e.email,password:e.password})}).then(function(e){return e.json()}).then(function(e){"Success"===e.status?(sessionStorage.setItem("session_token",e.info.token),b(t,n,!0)):n(e)}).catch(n)},A={saveUser:v,getUser:b,login:O,logout:function(){var e=Object(S.a)(y.a.mark(function e(t){return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:sessionStorage.removeItem("session_token"),t&&t();case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),signup:function(e,t,n){fetch(C.register,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e.email,password:e.password})}).then(function(e){return e.json()}).then(function(a){"Success"===a.status?O(e,t,n):n(a)}).catch(n)},isLoggedIn:function(){var e=Object(S.a)(y.a.mark(function e(){var t,n;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=sessionStorage.getItem("session_token"),n=!(!t||void 0===t||null===t||""===t||"null"===t),e.abrupt("return",n);case 3:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()},w=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).handleLogin=function(){n.props.history.push("/login")},n.handleLogout=function(){A.logout(function(){n.props.history.push("/login")})},n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e;return"/"===this.props.location.pathname?e=r.a.createElement(h.a,{color:"primary",onClick:this.handleLogin},"Log In"):"/login"===this.props.location.pathname?e="":"/notify"===this.props.location.pathname&&(e=r.a.createElement(h.a,{color:"primary",onClick:this.handleLogout},"Log Out")),r.a.createElement("div",{style:j},r.a.createElement("div",{style:I,color:"white"},"Logo"),r.a.createElement("div",{style:{flex:3}},r.a.createElement("header",{style:M},"University of Guelph NotifyMe")),r.a.createElement("div",{style:x},e))}}]),t}(r.a.Component),T=Object(m.e)(w),j={padding:"20px",display:"flex",flexDirection:"row",flex:"1",justifyContent:"center",alignItems:"center",width:"100%",backgroundColor:g.headerBackground},I={flex:"1"},x={display:"flex",flex:"1",justifyContent:"flex-end",alignItems:"flex-end"},M={fontSize:"50",color:g.headerText},k=n(26),L=n(79),N=n(80),P=n(81),R=n(82),D=function(e){function t(){return Object(s.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("header",{style:B},this.props.type),r.a.createElement("div",{style:H},r.a.createElement(L.a,{onSubmit:this.handleSubmit},r.a.createElement(N.a,null,r.a.createElement("div",{style:F},r.a.createElement(P.a,{style:{flex:1},for:"email"},"Email"),r.a.createElement(R.a,{style:{flex:3},type:"text",name:"email",id:"email",onChange:this.props.onChange}))),r.a.createElement(N.a,null,r.a.createElement("div",{style:F},r.a.createElement(P.a,{style:{flex:1},for:"password"},"Password"),r.a.createElement(R.a,{style:{flex:3},type:"password",name:"password",id:"password",onChange:this.props.onChange}))),"Sign Up"===this.props.type&&r.a.createElement(N.a,null,r.a.createElement("div",{style:F},r.a.createElement(P.a,{style:{flex:1},for:"confirmPassword"},"Confirm Password"),r.a.createElement(R.a,{style:{flex:3},type:"password",name:"confirmPassword",id:"confirmPassword",onChange:this.props.onChange}))),r.a.createElement("div",{style:G},this.props.errorMessage),r.a.createElement(h.a,{type:"button",color:"primary",disabled:void 0!==this.props.errorMessage,onClick:this.props.onSubmit},"Submit"))))}}]),t}(r.a.Component),B={color:"white",marginTop:"50px",fontSize:"20"},H={width:"30%",marginLeft:"auto",marginRight:"auto",paddingTop:"40px",marginTop:"20px",border:"1px solid #ccc"},F={display:"flex",flexDirection:"row",color:"white",marginRight:"40px",marginLeft:"10px"},G={color:g.errorText,paddingBottom:"10px"},U=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={email:"",password:"",confirmPassword:""},n.handleChange=function(e){var t;n.setState((t={},Object(k.a)(t,e.target.name,e.target.value),Object(k.a)(t,"errorMessage",void 0),t),function(){n.state.password!==n.state.confirmPassword&&n.setState({errorMessage:"Passwords do not match"})})},n.handleSubmit=function(){console.log(n.state);var e=n.state,t=e.email,a=e.password;if(a===e.confirmPassword){var r=n.props.history;A.signup({email:t,password:a},function(){r.push("/notify")},console.log)}else console.error("WRONG PASSWORD")},n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement(D,{type:"Sign Up",errorMessage:this.state.errorMessage,onChange:this.handleChange,onSubmit:this.handleSubmit})}}]),t}(r.a.Component),W=Object(m.e)(U),_=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={email:"",password:""},n.handleChange=function(e){n.setState(Object(k.a)({},e.target.name,e.target.value))},n.handleSubmit=function(){console.log(n.state)},n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement(D,{type:"Login",onChange:this.handleChange,onSubmit:this.handleSubmit})}}]),t}(r.a.Component),V=Object(m.e)(_),J=n(30),Y=n(90),z=n(87),K=n(88),Z=n(89),Q=n(83),X=n(84),q=n(85),$=n(86),ee=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={selected:void 0},n.onSelect=function(e){n.setState({selected:e.currentTarget.getAttribute("label")}),n.props.onChange(n.props.type,e.currentTarget.value)},n.getSelected=function(){return n.state.selected?n.state.selected:n.props.items[0][Object.keys(n.props.items[0])]},n.toggleDropdown=function(){n.setState(function(e){return{dropdownOpen:!e.dropdownOpen}})},n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(Q.a,{isOpen:this.state.dropdownOpen,toggle:this.toggleDropdown},r.a.createElement(X.a,{color:"primary",style:ne.button,caret:!0},this.getSelected()),r.a.createElement(q.a,{style:ne.menu},this.props.items.map(function(t,n){var a=Object.keys(t)[0],o=0===n?t[a]:a+" - "+t[a];return r.a.createElement($.a,{key:n,label:t[a],value:a,onClick:e.onSelect},o)})))}}]),t}(r.a.Component),te=Object(m.e)(ee),ne={menu:{maxHeight:"500px",overflowY:"scroll"},button:{textOverflow:"ellipsis",whiteSpace:"nowrap",width:"100%",display:"block",overflow:"hidden"}},ae={departments:[{any:"Any"},{ACCT:"Accounting"},{AGBU:"Agribusiness"},{AGR:"Agriculture"},{AHSS:"Arts/Humanities/Social Sci"},{ANSC:"Animal Science"},{ANTH:"Anthropology"},{AQUA:"Aquaculture"},{ARAB:"Arabic"},{ARTH:"Art History"},{ASCI:"Arts & Sciences"},{AVC:"Art & Visual Culture"},{BADM:"Business Administration"},{BINF:"Bioinformatics"},{BIOC:"Biochemistry"},{BIOL:"Biology"},{BIOM:"Biomedical Science"},{BIOP:"Biophysics"},{BIOT:"Biotechnology"},{BOT:"Botany"},{BUS:"Business"},{CCJP:"Criminology/Criminal Justice"},{CDE:"Capacity Development/Extension"},{CHEM:"Chemistry"},{CHIN:"Chinese"},{CIS:"Computing & Information Sci."},{CLAS:"Classical Studies"},{CLIN:"Clinical Studies"},{CME:"Commerce,Management&Economics"},{COOP:"Co-Op Education"},{CROP:"Crop Science"},{CRWR:"Creative Writing"},{DAFL:"Agri-Food Leadership (diploma)"},{DAGR:"Ag. & Equine Studies (dip)"},{DENM:"Environmental Mngt (diploma)"},{DEQN:"Equine (Diploma)"},{DFN:"Food & Nutrition (diploma)"},{DHRT:"Horticulture (diploma)"},{DTM:"Turf Management (diploma)"},{DVT:"Veterinary Technology (dip)"},{ECON:"Economics"},{ECS:"Early Childhood Studies"},{EDRD:"Env. Design/Rural Development"},{ENGG:"Engineering"},{ENGL:"English"},{ENVB:"Environmental Biology"},{ENVM:"Environmental Management"},{ENVS:"Environmental Sciences"},{EQN:"Equine"},{EURO:"European Studies"},{FARE:"Food, Agr & Resource Economics"},{FCSS:"Family/Community Social Servic"},{FDNT:"Food & Nutritional Science"},{FINA:"Fine Art"},{FOOD:"Food Science"},{FRAN:"Family Rel's/Applied Nutrition"},{FREN:"French Studies"},{FRHD:"Family Relations & Human Dev."},{FSQA:"Food Safety & Quality Assuranc"},{GEOG:"Geography"},{GERM:"German Studies"},{GERO:"Gerontology"},{GREK:"Greek Studies"},{HHNS:"Human Health/Nutritional Sci"},{HISP:"Hispanic Studies"},{HIST:"History"},{HK:"Human Kinetics"},{HORT:"Horticultural Science"},{HROB:"Human Resource/Organizat Behav"},{HTM:"Hospitality & Tourism Mngt"},{HUMN:"Humanities"},{IBIO:"Integrative Biology"},{IDEV:"International Development Std."},{IMPR:"Improvisation"},{INDG:"Indigenous Studies"},{INT:"Interdisciplinary"},{IPS:"Interdisciplinary Physical Sci"},{ISS:"Interdisciplinary Social Sci."},{ITAL:"Italian Studies"},{JUST:"Justice Studies"},{KIN:"Kinesiology"},{LACS:"Latin American/Caribbean St"},{LARC:"Landscape Architecture"},{LAT:"Latin"},{LEAD:"Leadership"},{LING:"Linguistics"},{LRS:"Land Resource Science"},{LTS:"Literary/Theatre Studies"},{MATH:"Mathematics"},{MBG:"Molecular Biology & Genetics"},{MCB:"Molecular & Cellular Biology"},{MCM:"McMaster"},{MCS:"Marketing & Consumer Studies"},{MDST:"Media Studies"},{MGMT:"Management"},{MICR:"Microbiology"},{MUSC:"Music"},{NANO:"Nanoscience"},{NEUR:"Neuroscience"},{NRS:"Natural Resource Studies"},{NUTR:"Nutrition"},{OAGR:"Organic Agriculture"},{PABI:"Pathobiology"},{PATH:"Pathology"},{PBIO:"Plant Biology"},{PHIL:"Philosophy"},{PHYS:"Physics"},{PLNT:"Plant Agriculture"},{POLS:"Political Science"},{POPM:"Population Medicine"},{PORT:"Portuguese"},{PSYC:"Psychology"},{REAL:"Real Estate & Housing"},{RPD:"Rural Planning & Development"},{RST:"Rural Studies"},{SART:"Studio Art"},{SCMA:"Science & Math"},{SOAN:"Sociology & Anthropology"},{SOC:"Sociology"},{SPAN:"Spanish"},{STAT:"Statistics"},{THST:"Theatre Studies"},{TOX:"Toxicology"},{TRMH:"Tourism and Hospitality"},{UNIV:"Interdisciplinary University"},{VETM:"Veterinary Medicine"},{WAT:"Waterloo"},{WLU:"Wilfrid Laurier"},{WMST:"Women's Studies"},{XSEN:"Seneca College"},{XSHR:"Sheridan College"},{ZOO:"Zoology"}],levels:[{any:"Any"},{"010":"Diploma - 1st Semester"},{"020":"Diploma - 2nd Semester"},{"030":"Diploma - 3rd Semester"},{"040":"Diploma - 4th Semester"},{100:"First Year"},{200:"Second Year"},{300:"Third Year"},{400:"Fourth Year"},{500:"Graduate"},{600:"Graduate"},{700:"Graduate"},{800:"Graduate"},{900:"Transfer Credit"}]},re=ae,oe=function(e,t,n){var a=Object.keys(t)[0];return e[a]=t[a],e},ie={departments:ae.departments.reduce(oe,{}),levels:ae.levels.reduce(oe,{})},se=n(38),le=n.n(se);n(78);le.a.initializeApp({apiKey:"AIzaSyBoALM6WoNAjhIr_-PPFZLL_ZldDWYADno",authDomain:"guelph-notifyme.firebaseapp.com",databaseURL:"https://guelph-notifyme.firebaseio.com",projectId:"guelph-notifyme",storageBucket:"",messagingSenderId:"161956224137",appId:"1:161956224137:web:85d298e11131aaf8"});var ce=le.a.messaging();function ue(e){console.log(e),sessionStorage.setItem("fcm_token",e)}ce.usePublicVapidKey("BP3FJNT_wp-itoVZJHAdmLXJEpasu_ofj3p-19BUX85l73t9GyZJSX1uiFoPoaGUB7xSZjFxt8Yew7Befba8QOc"),ce.requestPermission().then(function(e){ce.getToken().then(ue).catch(console.error)}),ce.onTokenRefresh(function(){ce.getToken().then(ue).catch(console.error)});var de=ce,pe=function(e){function t(){return Object(s.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,this.props.message&&r.a.createElement(Y.a,{isOpen:!0},r.a.createElement(z.a,null,this.props.message.notification.title),r.a.createElement(K.a,null,this.props.message.notification.body),r.a.createElement(Z.a,null,r.a.createElement(h.a,{color:"primary",onClick:this.props.handleClose},"Ok")," ")))}}]),t}(r.a.Component),me=Object(m.e)(pe),he=function(e){function t(e){var n;Object(s.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).handleClose=function(){var e=n.state;e.showModal=!1,delete e.newCourse,n.setState(e)},n.handleAddCourse=function(){var e=n.state.criteria,t=n.state.newCourse;e.push(t),n.setState({criteria:e}),n.handleClose()},n.inputOnChange=function(e,t){var a=n.state.newCourse?n.state.newCourse:{};a[e]=t,"any"!==t&&""!==t||delete a[e],n.setState({newCourse:a})},n.openModal=function(){n.setState({showModal:!0})},n.getLabel=function(e,t){return ie[e][t]},n.saveChanges=function(){var e=n.state.criteria,t=n.props.history;A.getUser(function(t){var a={data:{fcm_tokens:[]}};a.data.fcm_tokens=t.data.fcm_tokens,a.data.criteria=e,A.saveUser(a,function(e){n.setState({message:e}),setInterval(function(){n.setState({message:void 0})},2e3)})},function(){return t.push("/login")})};var a=Object(J.a)(n);return a.state={showModal:!1,userLoaded:!1,criteria:[]},A.getUser(function(e){var t=e&&e.data&&e.data.criteria?e.data.criteria:[];a.state.criteria=t,a.state.userLoaded=!0,a.forceUpdate()}),n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;de.onMessage(function(t){e.setState({notification:t,criteria:[]})})}},{key:"render",value:function(){var e=this;return this.state.userLoaded?r.a.createElement("div",{style:fe.container},r.a.createElement("div",{style:fe.header},r.a.createElement("header",null,"These are the current courses you are watching"),r.a.createElement("header",null,"Edit them as you please.")),r.a.createElement("div",{style:fe.formWrapper},r.a.createElement("div",{style:fe.criteriaWrapper},Array.apply(null,{length:this.state.criteria.length}).map(Number.call,function(t){var n=e.state.criteria[t];return r.a.createElement("div",{key:t,style:fe.singleCriteria},r.a.createElement("div",{style:fe.detail},n.department?e.getLabel("departments",n.department):"Any"),r.a.createElement("div",{style:fe.detail},n.level?e.getLabel("levels",n.level):"Any"),r.a.createElement("div",{style:fe.detail},n.course?n.course:"Any"),r.a.createElement("div",{style:fe.detail},n.section?n.section:"Any"))})),r.a.createElement("div",{style:fe.message},this.state.message),r.a.createElement("div",{style:fe.button},r.a.createElement(h.a,{style:fe.buttonColours,color:"primary",onClick:this.openModal},"Add Course")),r.a.createElement("div",{style:fe.button},r.a.createElement(h.a,{style:fe.buttonColours,color:"primary",onClick:this.saveChanges},"Save Changes"))),r.a.createElement(Y.a,{isOpen:this.state.showModal},r.a.createElement(z.a,null,"Add/Edit Course"),r.a.createElement(K.a,null,r.a.createElement("div",{style:fe.courseWrapper},r.a.createElement("div",{style:fe.courseInput},"Department",r.a.createElement(te,{items:re.departments,type:"department",onChange:this.inputOnChange})),r.a.createElement("div",{style:fe.courseInput},"Level",r.a.createElement(te,{items:re.levels,type:"level",onChange:this.inputOnChange})),r.a.createElement("div",{style:fe.courseInput},"Course #",r.a.createElement("input",{type:"text",maxLength:4,onChange:function(t){return e.inputOnChange("course",t.target.value)}})),r.a.createElement("div",{style:fe.courseInput},"Section #",r.a.createElement("input",{type:"text",maxLength:4,onChange:function(t){return e.inputOnChange("section",t.target.value)}})))),r.a.createElement(Z.a,null,r.a.createElement(h.a,{color:"secondary",onClick:this.handleClose},"Cancel"),r.a.createElement(h.a,{color:"primary",onClick:this.handleAddCourse},"Add Course")," ")),r.a.createElement(me,{message:this.state.notification,handleClose:function(){return e.setState({notification:void 0})}})):r.a.createElement("div",null)}}]),t}(r.a.Component),ge=Object(m.e)(he),fe={container:{paddingTop:50},header:{color:g.text,fontSize:20},formWrapper:{width:"30%",marginLeft:"auto",marginRight:"auto",paddingTop:"40px",marginTop:"20px",backgroundColor:g.background2},button:{padding:10},buttonColours:{backgroundColor:g.background2,borderColor:g.button,color:g.button},courseWrapper:{display:"flex",alignItems:"center",flexDirection:"column"},courseInput:{padding:"10px",width:"200px"},criteriaWrapper:{color:g.text,display:"flex",flexDirection:"column",alignItems:"center"},singleCriteria:{display:"flex",flexDirection:"row",alignItems:"center"},detail:{padding:"20px"},message:{color:g.text}},ye=function(e){function t(){return Object(s.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement(p.a,null,r.a.createElement("div",{style:Se},r.a.createElement(T,null),r.a.createElement(m.a,{exact:!0,path:"/",render:function(){return r.a.createElement(W,null)}}),r.a.createElement(m.a,{path:"/login",render:function(){return r.a.createElement(V,null)}}),r.a.createElement(m.a,{path:"/notify",render:function(){return r.a.createElement(ge,null)}})))}}]),t}(r.a.Component),Se={textAlign:"center",height:"100%",backgroundColor:g.background};n(76);i.a.render(r.a.createElement(function(){return r.a.createElement(ye,null)},{style:{height:"100%"}}),document.getElementById("root"))}},[[52,1,2]]]);
//# sourceMappingURL=main.acf8b791.chunk.js.map